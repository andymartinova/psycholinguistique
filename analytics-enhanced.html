<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Analyses avanc√©es</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/responsive.css" />
</head>
<body>
  <a href="index.html" class="home-button" data-i18n="nav.home">üè† Accueil</a>
  
  <div class="container">
    <header class="page-header">
      <h1 data-i18n="analytics.title">Analyses avanc√©es</h1>
      <p data-i18n="analytics.description">Importez et analysez les donn√©es d'exp√©rience</p>
    </header>

    <!-- Section de gestion des participants depuis la base de donn√©es -->
    <section class="database-section">
      <h2 data-i18n="analytics.participants_database_title">üìä Participants de la base de donn√©es</h2>
      
      <!-- Tableau des participants -->
      <div class="participants-table-container">
        <div class="table-header">
          <div class="selection-controls">
            <label>
              <input type="checkbox" id="select-all-participants">
              <span data-i18n="analytics.select_all">S√©lectionner tout</span>
            </label>
            <span id="selected-count">0 <span data-i18n="analytics.selected_count">participant(s) s√©lectionn√©(s)</span></span>
          </div>
          <button id="process-selected-btn" class="btn btn-primary" disabled data-i18n="analytics.process_selected">Traiter les participants s√©lectionn√©s</button>
        </div>
        
        <!-- Filtres int√©gr√©s au tableau -->
        <div class="table-filters">
          <div class="filter-group">
            <label for="filter-participant-id" data-i18n="analytics.filter_participant_id">ID Participant:</label>
            <input type="text" id="filter-participant-id" placeholder="P001, P002...">
          </div>
          <div class="filter-group">
            <label for="filter-language" data-i18n="analytics.filter_language">Langue maternelle:</label>
            <select id="filter-language">
              <option value="" data-i18n="analytics.all_languages">Toutes</option>
              <option value="french">Fran√ßais</option>
              <option value="portuguese">Portugais</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="filter-german-level" data-i18n="analytics.filter_german_level">Niveau d'allemand:</label>
            <select id="filter-german-level">
              <option value="" data-i18n="analytics.all_levels">Tous</option>
              <option value="A1">A1</option>
              <option value="A2">A2</option>
              <option value="B1">B1</option>
              <option value="B2">B2</option>
              <option value="C1">C1</option>
              <option value="C2">C2</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="filter-bilingual">Bilingue:</label>
            <select id="filter-bilingual">
              <option value="">Tous</option>
              <option value="yes">Oui</option>
              <option value="no">Non</option>
            </select>
          </div>
          <div class="filter-group filter-group-buttons">
            <button id="include-filtered-btn" class="btn btn-success" data-i18n="analytics.include_filtered">‚úì Inclure les participants filtr√©s</button>
            <button id="exclude-filtered-btn" class="btn btn-warning" data-i18n="analytics.exclude_filtered">‚úó Exclure les participants filtr√©s</button>
            <button id="clear-filters-btn" class="btn btn-secondary" data-i18n="analytics.reset_filters">R√©initialiser les filtres</button>
          </div>
        </div>
        
          <table id="participants-table" class="participants-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="select-all-checkbox"></th>
                <th>ID Participant</th>
                <th>Langue maternelle</th>
                <th>Niveau d'allemand</th>
                <th>Bilingue</th>
                <th>Date de d√©but</th>
                <th>Download CSV</th>
              </tr>
            </thead>
          <tbody id="participants-table-body">
            <tr>
              <td colspan="7" class="empty-state" data-i18n="analytics.loading_participants">Chargement des participants...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Statistiques globales -->
    <section class="stats-section">
      <h2 data-i18n="analytics.global_stats">Statistiques globales</h2>
      <div id="global-stats" class="stats-grid"></div>
    </section>

    <!-- Graphiques de performance -->
    <section class="charts-section">
      <!-- Performance par condition -->
      <div class="chart-container">
        <h3 data-i18n="analytics.performance_by_condition">Performance par condition</h3>
        <div id="performance-by-condition-chart" class="chart"></div>
      </div>

      <!-- Pr√©cision par condition -->
      <div class="chart-container">
        <h3 data-i18n="analytics.accuracy_by_condition">Pr√©cision par condition</h3>
        <div id="accuracy-chart" class="chart"></div>
      </div>

      <!-- Temps de r√©ponse par condition -->
      <div class="chart-container">
        <h3 data-i18n="analytics.response_time_by_condition">Temps de r√©ponse par condition</h3>
        <div id="response-time-chart" class="chart"></div>
      </div>

      <!-- Comparaison des participants -->
      <div class="chart-container">
        <h3 data-i18n="analytics.participant_comparison">Comparaison des participants</h3>
        <div id="participant-chart" class="chart"></div>
      </div>
    </section>

    <!-- Statistiques par condition -->
    <section class="stats-section">
      <h2 data-i18n="analytics.condition_stats">Statistiques par condition</h2>
      <div id="condition-stats" class="stats-grid"></div>
    </section>

    <!-- Comparaison par question -->
    <section class="charts-section">
      <h2>Comparaison par question</h2>
      <div class="chart-container">
        <h3>Performance par question</h3>
        <div id="questions-chart" class="chart"></div>
      </div>
    </section>

    <!-- Comparaison des participants -->
    <section class="stats-section">
      <h2 data-i18n="analytics.participant_comparison">Comparaison des participants</h2>
      <div id="participant-comparison" class="stats-grid"></div>
    </section>

    <!-- Donn√©es brutes -->
    <section class="raw-data-section">
      <h2 data-i18n="analytics.raw_data">Donn√©es brutes</h2>
      <div id="raw-data"></div>
    </section>

    <!-- Actions -->
    <section class="actions-section">
      <button id="export-analytics-btn" class="btn btn-secondary" data-i18n="analytics.export_data">Exporter les donn√©es</button>
      <button id="clear-data-btn" class="btn btn-danger" data-i18n="analytics.clear_data">Effacer toutes les donn√©es</button>
    </section>
  </div>

  <!-- Chart.js pour les graphiques -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Script du graphique de r√©sum√© de performance -->
  <script src="graphiques/performance-summary-chart.js"></script>
  <!-- Script du graphique de performance par condition -->
  <script src="graphiques/performance-by-condition-chart.js"></script>
  <!-- Script du graphique de pr√©cision par condition -->
  <script src="graphiques/accuracy-chart.js"></script>
  <!-- Script du graphique de temps de r√©ponse par condition -->
  <script src="graphiques/response-time-chart.js"></script>
  <!-- Script du graphique de comparaison des participants -->
  <script src="graphiques/participant-comparison-chart.js"></script>

  <!-- Scripts personnalis√©s -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/data.js"></script>
  <script src="js/database-analytics.js"></script>
  <script src="js/analytics.js"></script>
  <script src="js/i18n.js?v=3"></script>
  <script src="js/main.js"></script>
</body>
</html>

