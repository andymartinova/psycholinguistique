<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Analyses avanc√©es</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/responsive.css" />
</head>
<body>
  <div class="container">
    <header class="page-header">
      <h1 data-i18n="analytics.title">Analyses avanc√©es</h1>
      <p data-i18n="analytics.description">Importez et analysez les donn√©es d'exp√©rience</p>
    </header>

    <!-- Section de gestion des participants depuis la base de donn√©es -->
    <section class="database-section">
      <h2 data-i18n="analytics.participants_database_title">üìä Participants de la base de donn√©es</h2>
      
      <!-- Filtres -->
      <div class="filters-panel">
        <div class="filter-group">
          <label for="filter-participant-id" data-i18n="analytics.filter_participant_id">ID Participant:</label>
          <input type="text" id="filter-participant-id" placeholder="P001, P002...">
        </div>
        <div class="filter-group">
          <label for="filter-language" data-i18n="analytics.filter_language">Langue maternelle:</label>
          <select id="filter-language">
            <option value="" data-i18n="analytics.all_languages">Toutes</option>
            <option value="french">Fran√ßais</option>
            <option value="portuguese">Portugais</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="filter-german-level" data-i18n="analytics.filter_german_level">Niveau d'allemand:</label>
          <select id="filter-german-level">
            <option value="" data-i18n="analytics.all_levels">Tous</option>
            <option value="A1">A1</option>
            <option value="A2">A2</option>
            <option value="B1">B1</option>
            <option value="B2">B2</option>
            <option value="C1">C1</option>
            <option value="C2">C2</option>
          </select>
        </div>
        <div class="filter-group">
          <button id="load-participants-btn" class="btn btn-primary" data-i18n="analytics.load_participants">Charger les participants</button>
          <button id="clear-filters-btn" class="btn btn-secondary" data-i18n="analytics.reset_filters">R√©initialiser les filtres</button>
        </div>
      </div>

      <!-- Tableau des participants -->
      <div class="participants-table-container">
        <div class="table-header">
          <div class="selection-controls">
            <label>
              <input type="checkbox" id="select-all-participants">
              <span data-i18n="analytics.select_all">S√©lectionner tout</span>
            </label>
            <span id="selected-count">0 <span data-i18n="analytics.selected_count">participant(s) s√©lectionn√©(s)</span></span>
          </div>
          <button id="process-selected-btn" class="btn btn-primary" disabled data-i18n="analytics.process_selected">Traiter les participants s√©lectionn√©s</button>
        </div>
        <table id="participants-table" class="participants-table">
          <thead>
            <tr>
              <th><input type="checkbox" id="select-all-checkbox"></th>
              <th>ID Participant</th>
              <th>Langue maternelle</th>
              <th>Niveau d'allemand</th>
              <th>Date de d√©but</th>
              <th>IP</th>
              <th>Nombre d'exp√©riences</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="participants-table-body">
            <tr>
              <td colspan="8" class="empty-state" data-i18n="analytics.empty_participants">Cliquez sur "Charger les participants" pour afficher les donn√©es</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Section d'import -->
    <section class="import-section">
      <div class="import-area">
        <div class="import-content">
          <div class="import-icon">üìÅ</div>
          <h3 data-i18n="analytics.import_title">Importer des donn√©es</h3>
          <p data-i18n="analytics.import_description">Glissez-d√©posez des fichiers JSON ou cliquez pour s√©lectionner</p>
          <button id="upload-btn" class="btn btn-primary" data-i18n="analytics.select_files">S√©lectionner des fichiers</button>
          <input type="file" id="file-input" accept=".json" multiple style="display: none;" />
        </div>
      </div>
      <div id="imported-files" class="imported-files-list"></div>
    </section>

    <!-- Statistiques globales -->
    <section class="stats-section">
      <h2 data-i18n="analytics.global_stats">Statistiques globales</h2>
      <div id="global-stats" class="stats-grid"></div>
    </section>

    <!-- Graphiques de performance -->
    <section class="charts-section">
      <h2 data-i18n="analytics.performance_charts">Graphiques de performance</h2>
      
      <!-- R√©sum√© de performance -->
      <div class="chart-container">
        <h3 data-i18n="analytics.performance_summary">R√©sum√© de performance</h3>
        <div id="performance-summary-chart" class="chart"></div>
      </div>

      <!-- Performance par condition -->
      <div class="chart-container">
        <h3 data-i18n="analytics.performance_by_condition">Performance par condition</h3>
        <div id="performance-by-condition-chart" class="chart"></div>
        
      </div>

      <!-- Graphiques existants -->
      <div class="chart-container">
        <h3 data-i18n="analytics.accuracy_by_condition">Pr√©cision par condition</h3>
        <div id="accuracy-chart" class="chart"></div>
      </div>

      <div class="chart-container">
        <h3 data-i18n="analytics.response_time_by_condition">Temps de r√©ponse par condition</h3>
        <div id="response-time-chart" class="chart"></div>
      </div>

      <div class="chart-container">
        <h3 data-i18n="analytics.participant_comparison">Comparaison des participants</h3>
        <div id="participant-chart" class="chart"></div>
      </div>

      <div class="chart-container">
        <h3 data-i18n="analytics.learning_curve">Courbe d'apprentissage</h3>
        <div id="learning-curve-chart" class="chart"></div>
      </div>
    </section>

    <!-- Statistiques par condition -->
    <section class="stats-section">
      <h2 data-i18n="analytics.condition_stats">Statistiques par condition</h2>
      <div id="condition-stats" class="stats-grid"></div>
    </section>

    <!-- Comparaison des participants -->
    <section class="stats-section">
      <h2 data-i18n="analytics.participant_comparison">Comparaison des participants</h2>
      <div id="participant-comparison" class="stats-grid"></div>
    </section>

    <!-- Donn√©es brutes -->
    <section class="raw-data-section">
      <h2 data-i18n="analytics.raw_data">Donn√©es brutes</h2>
      <div id="raw-data"></div>
    </section>

    <!-- Actions -->
    <section class="actions-section">
      <button id="export-analytics-btn" class="btn btn-secondary" data-i18n="analytics.export_data">Exporter les donn√©es</button>
      <button id="clear-data-btn" class="btn btn-danger" data-i18n="analytics.clear_data">Effacer toutes les donn√©es</button>
    </section>
  </div>

  <!-- Chart.js pour les graphiques -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Script du graphique de r√©sum√© de performance -->
  <script src="graphiques/performance-summary-chart.js"></script>
  <!-- Script du graphique de performance par condition -->
  <script src="graphiques/performance-by-condition-chart.js"></script>
  <!-- Script du graphique de pr√©cision par condition -->
  <script src="graphiques/accuracy-chart.js"></script>
  <!-- Script du graphique de temps de r√©ponse par condition -->
  <script src="graphiques/response-time-chart.js"></script>
  <!-- Script du graphique de comparaison des participants -->
  <script src="graphiques/participant-comparison-chart.js"></script>
  <!-- Script du graphique de courbe d'apprentissage -->
  <script src="graphiques/learning-curve-chart.js"></script>

  <!-- Scripts personnalis√©s -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/database-analytics.js"></script>
  <script src="js/analytics.js"></script>
  <script src="js/data.js"></script>
  <script src="js/i18n.js?v=3"></script>
  <script src="js/main.js"></script>
</body>
</html>

